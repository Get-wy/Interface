(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dd29084"],{"303d":function(t,e,i){},"44e7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"projectlist-container"},[i("el-select",{attrs:{placeholder:"项目类别"},model:{value:t.project_Category,callback:function(e){t.project_Category=e},expression:"project_Category"}},t._l(t.propject_CategoryList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),i("el-select",{attrs:{placeholder:"设计阶段"},model:{value:t.design_Stage,callback:function(e){t.design_Stage=e},expression:"design_Stage"}},t._l(t.design_StageList,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),i("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"项目名称或编号"},model:{value:t.project_NameOrNumber,callback:function(e){t.project_NameOrNumber=e},expression:"project_NameOrNumber"}}),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getList}},[t._v("\n      查询\n    ")]),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.Output}},[i("svg-icon",{staticStyle:{width:"14px",height:"14.5px"},attrs:{iconClass:"excel"}}),t._v("\n      导出\n    ")],1),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:t.print}},[t._v("\n      打印\n    ")]),t._v(" "),i("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{border:"","show-overflow":"","show-footer":"","highlight-hover-row":"",align:"center","max-height":t.clientHeight,data:t.tableData,"footer-method":t.footerMethod}},[i("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号",fixed:"left"}}),t._v(" "),i("vxe-table-column",{attrs:{field:"itemNumber",title:"项目编号",width:"130",fixed:"left"}}),t._v(" "),i("vxe-table-column",{attrs:{width:"300",field:"projectName",title:"项目名称",fixed:"left",align:"left"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"projectCategory",title:"项目类别",align:"left"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"designStage",title:"设计阶段",align:"left"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"designPrincipal",title:"设计负责人"}}),t._v(" "),i("vxe-table-column",{attrs:{width:"80",field:"specialty",title:"所"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"specialtyBonus",title:"所计算产值",align:"right"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"bonusDistributed",title:"已发放产值",align:"right"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"bonusReserved",title:"剩余产值",align:"right"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"bonusSeasonProgress",title:"本季度进度",align:"right"}}),t._v(" "),i("vxe-table-column",{attrs:{"min-width":"100",field:"bonusSeasonAmount",title:"本季度产值",align:"right"}}),t._v(" "),i("vxe-table-column",{attrs:{width:"80",field:"project_submit",title:"项目进度",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleProjectProgress(e.row.itemNumber)}}},[i("svg-icon",{staticStyle:{width:"20px",height:"20px"},attrs:{iconClass:e.row.project_submit?"projectprogress":"projectprogress-warn"}})],1)]}}])}),t._v(" "),i("vxe-table-column",{attrs:{width:"80",field:"bonus_submit",title:"产值分配",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleBonusDistribution(e.row.itemNumber)}}},[i("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:e.row.bonus_submit?"bonusdistribution":"bonusdistribution-warn"}})],1)]}}])}),t._v(" "),i("vxe-table-column",{attrs:{width:"80",field:"itemNumber",title:"操作记录",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.history(e.row.itemNumber)}}},[i("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:"project-history"}})],1)]}}])})],1)],1)},n=[],s=i("75fc"),r=i("db72"),o=(i("96cf"),i("3b8d")),l=(i("c5f6"),i("ac6a"),i("c695")),u=i.n(l),c=i("ed08"),d=i("add5"),m=i.n(d),p={name:"ProjectList",data:function(){return{project_Category:"",propject_CategoryList:[],design_Stage:"",design_StageList:[],project_NameOrNumber:"",specialtyList:[],total:0,tableData:[],tempTableData:[],sum7:0,sum8:0,sum9:0,sum11:0,loading:!1,clientHeight:0}},computed:{},methods:{footerMethod:function(t){var e=t.columns,i=t.data,a=[];return e.forEach((function(t,e){if(0===e)a.push("合计");else{var n=null;switch(t.property){case"specialtyBonus":n=u.a.commafy(u.a.sum(i,t.property).toFixed(2));break;case"bonusDistributed":n=u.a.commafy(u.a.sum(i,t.property).toFixed(2));break;case"bonusReserved":n=u.a.commafy(u.a.sum(i,t.property).toFixed(2));break;case"bonusSeasonAmount":n=u.a.commafy(u.a.sum(i,t.property).toFixed(2));break}a.push(n)}})),[a]},getSummaries:function(t){var e=t.columns,i=t.data,a=[];return e.forEach((function(t,e){if(e<7||e>11||10===e)a[e]=0===e?"合计":"";else{var n=i.map((function(e){return Number(e[t.property])}));n.every((function(t){return isNaN(t)}))?a[e]="":(a[e]=n.reduce((function(t,e){var i=Number(e);return isNaN(i)?t:t+e}),0),e>6&&e<12&&(a[e]=a[e].toFixed(2)))}})),a},history:function(t){this.$router.push({path:"/bonus-principal-project/ProjectHistory/".concat(t)})},handleProjectProgress:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$router.push({path:"/bonus-principal-project/ProjectProgress/".concat(e)});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleBonusDistribution:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$router.push({path:"/bonus-principal-project/BonusSubspecialtyList/".concat(e)});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){this.getList()},getList:function(){var t=this;this.loading=!0;var e={projectType:this.project_Category,projectPhase:this.design_Stage,projectSelect:this.project_NameOrNumber};this.$store.dispatch("bonusPrincipal/getProjectList",e).then((function(e){for(var i in t.tableData=e,t.tableData)t.tableData[i].projectCategory=Object(c["a"])(t.tableData[i].projectCategory,t.propject_CategoryList),t.tableData[i].designStage=Object(c["a"])(t.tableData[i].designStage,t.design_StageList),t.tableData[i].specialty=Object(c["a"])(t.tableData[i].specialty,t.specialtyList),t.tableData[i].designStageName&&(t.tableData[i].designStage="".concat(t.tableData[i].designStage,"-").concat(t.tableData[i].designStageName));t.loading=!1})).catch((function(e){t.loading=!1,t.$message({message:e,type:"error"})}))},Output:function(){var t=this;for(var e in this.tempTableData.length=0,this.sum7=0,this.sum8=0,this.sum9=0,this.sum11=0,this.tableData)this.tempTableData[e]=Object(r["a"])({},{index:Number(e)+1},{},this.tableData[e]),this.sum7+=Number(this.tempTableData[e].specialtyBonus),this.sum8+=Number(this.tempTableData[e].bonusDistributed),this.sum9+=Number(this.tempTableData[e].bonusReserved),this.sum11+=Number(this.tempTableData[e].bonusSeasonAmount);this.tempTableData=[].concat(Object(s["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",specialty:"",specialtyBonus:Number(this.sum7).toFixed(2),bonusDistributed:Number(this.sum8).toFixed(2),bonusReserved:Number(this.sum9).toFixed(2),bonusSeasonProgress:"",bonusSeasonAmount:Number(this.sum11).toFixed(2)}]),this.downloadLoading=!0,Promise.all([i.e("chunk-e69e90f4"),i.e("chunk-2181d362")]).then(i.bind(null,"4bf8d")).then((function(e){var i=["序号","项目编号","项目名称","项目类别","设计阶段","设计负责人","所","所产值","已发放产值","剩余产值","本季度进度","本季度产值"],a=["index","itemNumber","projectName","projectCategory","designStage","designPrincipal","specialty","specialtyBonus","bonusDistributed","bonusReserved","bonusSeasonProgress","bonusSeasonAmount"],n=t.tempTableData,s=t.formatJson(a,n);e.export_json_to_excel({header:i,data:s,filename:"负责所长项目列表",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))},print:function(){for(var t in this.tempTableData.length=0,this.sum7=0,this.sum8=0,this.sum9=0,this.sum11=0,this.tableData)this.tempTableData[t]=Object(r["a"])({},{index:Number(t)+1},{},this.tableData[t]),this.sum7+=Number(this.tempTableData[t].specialtyBonus),this.sum8+=Number(this.tempTableData[t].bonusDistributed),this.sum9+=Number(this.tempTableData[t].bonusReserved),this.sum11+=Number(this.tempTableData[t].bonusSeasonAmount);this.tempTableData=[].concat(Object(s["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",specialty:"",specialtyBonus:Number(this.sum7).toFixed(2),bonusDistributed:Number(this.sum8).toFixed(2),bonusReserved:Number(this.sum9).toFixed(2),bonusSeasonProgress:"",bonusSeasonAmount:Number(this.sum11).toFixed(2)}]);var e={printable:this.tempTableData,properties:[{field:"index",displayName:"序号"},{field:"itemNumber",displayName:"项目编号"},{field:"projectName",displayName:"项目名称"},{field:"projectCategory",displayName:"项目类别"},{field:"designStage",displayName:"设计阶段"},{field:"designPrincipal",displayName:"设计负责人"},{field:"specialty",displayName:"所"},{field:"specialtyBonus",displayName:"所产值"},{field:"bonusDistributed",displayName:"已发放产值"},{field:"bonusReserved",displayName:"剩余产值"},{field:"bonusSeasonProgress",displayName:"本季度进度"},{field:"bonusSeasonAmount",displayName:"本季度产值"}],type:"json",gridHeaderStyle:"color: black;  border: 1px solid #000000;",gridStyle:"border: 1px solid #000000;"};m()(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},init:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("settings/getSettings").then((function(t){e.propject_CategoryList=[{value:"",label:"项目类型(全部)"}].concat(Object(s["a"])(t.projectCategory)),e.design_StageList=[{value:"",label:"设计阶段(全部)"}].concat(Object(s["a"])(t.designPhase)),e.specialtyList=t.placeList})).catch((function(){}));case 2:this.getList();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.init()},activated:function(){this.loading=!0,this.clientHeight=document.body.clientHeight-210,this.init()},created:function(){this.loading=!0,this.clientHeight=document.body.clientHeight-210,console.log(document.body.clientHeight)}},b=p,h=b,g=(i("cc3d"),i("2877")),f=Object(g["a"])(h,a,n,!1,null,"2fb2f5ad",null);e["default"]=f.exports},cc3d:function(t,e,i){"use strict";var a=i("303d"),n=i.n(a);n.a},ed08:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));i("28a5"),i("a481"),i("6b54"),i("7618");function a(t,e){for(var i in e)if(e[i].value==t)return e[i].label}function n(t,e){for(var i in e)if(e[i].label==t)return e[i].value}}}]);