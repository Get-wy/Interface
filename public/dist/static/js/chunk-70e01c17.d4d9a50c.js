(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70e01c17"],{"28a5":function(t,e,n){"use strict";var i=n("aae3"),a=n("cb7c"),r=n("ebd6"),s=n("0390"),c=n("9def"),u=n("5f1b"),o=n("520a"),l=n("79e5"),p=Math.min,d=[].push,f="split",b="length",h="lastIndex",m=4294967295,g=!l((function(){RegExp(m,"y")}));n("214f")("split",2,(function(t,e,n,l){var v;return v="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[b]||2!="ab"[f](/(?:ab)*/)[b]||4!="."[f](/(.?)(.?)/)[b]||"."[f](/()()/)[b]>1||""[f](/.?/)[b]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(a,t,e);var r,s,c,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,f=void 0===e?m:e>>>0,g=new RegExp(t.source,l+"g");while(r=o.call(g,a)){if(s=g[h],s>p&&(u.push(a.slice(p,r.index)),r[b]>1&&r.index<a[b]&&d.apply(u,r.slice(1)),c=r[0][b],p=s,u[b]>=f))break;g[h]===r.index&&g[h]++}return p===a[b]?!c&&g.test("")||u.push(""):u.push(a.slice(p)),u[b]>f?u.slice(0,f):u}:"0"[f](void 0,0)[b]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var a=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a,i):v.call(String(a),n,i)},function(t,e){var i=l(v,t,this,e,v!==n);if(i.done)return i.value;var o=a(t),d=String(this),f=r(o,RegExp),b=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(g?"y":"g"),y=new f(g?o:"^(?:"+o.source+")",h),w=void 0===e?m:e>>>0;if(0===w)return[];if(0===d.length)return null===u(y,d)?[d]:[];var x=0,S=0,k=[];while(S<d.length){y.lastIndex=g?S:0;var _,j=u(y,g?d:d.slice(S));if(null===j||(_=p(c(y.lastIndex+(g?0:S)),d.length))===x)S=s(d,S,b);else{if(k.push(d.slice(x,S)),k.length===w)return k;for(var R=1;R<=j.length-1;R++)if(k.push(j[R]),k.length===w)return k;S=x=_}}return k.push(d.slice(x)),k}]}))},"57e1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"specialty-container"},[n("el-table",{staticStyle:{width:"90%","margin-top":"20px"},attrs:{data:t.tabledata,"default-sort":{prop:"specialty",order:"ascending"},border:!0,"summary-method":t.getSummaries,"show-summary":""}},[n("el-table-column",{attrs:{type:"index",prop:"index",label:"序号",width:"80",align:"center",fixed:"left"}}),t._v(" "),n("el-table-column",{attrs:{prop:"specialty",label:"所",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"specialtyPrincipal",label:"负责所长",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"bonusInTotal",label:"所计算产值",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"bonusDistributed",label:"已发放产值",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"bonusReserved",label:"剩余产值",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"bonusSeason",label:"本季度产值",width:"",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"submit",label:"项目查看",width:"",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){return t.handleClickProject(e.row.specialty)}}},[n("svg-icon",{attrs:{iconClass:e.row.submit?"projectlist":"projectlist-warn"}})],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"人员产值",width:"",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){return t.handleClickStaff(e.row.specialty)}}},[n("svg-icon",{staticStyle:{width:"22px",height:"22px"},attrs:{iconClass:"stafflist"}})],1)]}}])})],1),t._v(" "),n("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",disabled:t.isButtonDisabled||!t.againSubmit},on:{click:t.clickConfirmDistribution}},[t._v("\n    产值发放\n  ")])],1)},a=[],r=(n("c5f6"),n("ac6a"),n("96cf"),n("3b8d")),s=n("ed08"),c=n("c695"),u=n.n(c),o={name:"SpecialtyList",data:function(){return{isButtonDisabled:!1,visibleReconfirm:!1,specialtyList:[],tabledata:[],sumBonus:0,againSubmit:!1,loading:!1}},computed:{},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.submit?"":"warning-row"},clickConfirmDistribution:function(){var t=this;this.$confirm("即将进行本季度的产值发放工作，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.$store.dispatch("bonusdean/confirmDistribution",{sysSeasonBonus:t.sumBonus}).then((function(e){t.visibleReconfirm=!1,t.$message({type:"success",message:"产值发放成功"}),t.loading=!1,t.getSpecialtyList()})).catch((function(e){t.loading=!1,t.$message({message:e,type:"error"})}))})).catch((function(){t.$message({type:"info",message:"已取消发放"})}))},readSettings:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.$store.dispatch("settings/getSettings").then((function(n){e.specialtyList=n.placeList,t()})).catch((function(t){e.$message({message:t,type:"error"})}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getSpecialtyList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.$store.dispatch("bonusdean/getspecialtylist").then((function(n){for(var i in e.isButtonDisabled=!1,e.tabledata=n.data,e.tabledata)e.tabledata[i].specialty=Object(s["a"])(e.tabledata[i].specialty,e.specialtyList),e.tabledata[i].submit||(e.isButtonDisabled=!0);e.againSubmit=n.againSubmit,t()})).catch((function(t){e.$message({message:t,type:"error"})}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getSummaries:function(t){var e=t.columns,n=t.data,i=[];return e.forEach((function(t,e){if(e<3||e>6)i[e]=0===e?"合计":"";else{var a=n.map((function(e){return Number(e[t.property])}));a.every((function(t){return isNaN(t)}))?i[e]="":(i[e]=a.reduce((function(t,e){var n=Number(e);return isNaN(n)?t:t+e}),0),e>2&&e<7&&(i[e]=u.a.commafy(i[e].toFixed(2))))}})),this.sumBonus=i[6],i},handleClickProject:function(t){this.$router.push({path:"/bonus-dean-project/ProjectList/".concat(Object(s["b"])(t,this.specialtyList))})},handleClickStaff:function(t){this.$router.push({path:"/bonus-dean-staff/StaffBonusList/".concat(Object(s["b"])(t,this.specialtyList))})},init:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.readSettings();case 2:return t.next=4,this.getSpecialtyList();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.init()}},l=o,p=l,d=n("2877"),f=Object(d["a"])(p,i,a,!1,null,"644ca7a0",null);e["default"]=f.exports},ed08:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));n("28a5"),n("a481"),n("6b54"),n("7618");function i(t,e){for(var n in e)if(e[n].value==t)return e[n].label}function a(t,e){for(var n in e)if(e[n].label==t)return e[n].value}}}]);