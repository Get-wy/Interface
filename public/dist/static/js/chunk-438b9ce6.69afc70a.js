(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-438b9ce6"],{ba7b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ProgressManage-container"},[a("el-select",{attrs:{placeholder:"项目类别"},model:{value:t.project_Category,callback:function(e){t.project_Category=e},expression:"project_Category"}},t._l(t.propject_CategoryList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{attrs:{placeholder:"设计阶段"},model:{value:t.design_Stage,callback:function(e){t.design_Stage=e},expression:"design_Stage"}},t._l(t.design_StageList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{attrs:{placeholder:"阶段状态"},model:{value:t.stage_Status,callback:function(e){t.stage_Status=e},expression:"stage_Status"}},t._l(t.stage_StatusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"项目名称或编号"},model:{value:t.project_NameOrNumber,callback:function(e){t.project_NameOrNumber=e},expression:"project_NameOrNumber"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getTableList}},[t._v("\n      查询\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(e){return t.Output()}}},[a("svg-icon",{staticStyle:{width:"14px",height:"14.5px"},attrs:{iconClass:"excel"}}),t._v("\n      导出\n    ")],1),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:function(e){return t.print()}}},[t._v("\n      打印\n    ")]),t._v(" "),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{border:"","show-overflow":"","show-footer":"","highlight-hover-row":"",align:"center","max-height":t.clientHeight,data:t.tableData,"footer-method":t.footerMethod}},[a("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号",fixed:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"itemNumber",title:"项目编号",width:"130",fixed:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"280",field:"projectName",title:"项目名称",fixed:"left",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"projectCategory",title:"项目类别",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"designStage",title:"设计阶段",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"designPrincipal",title:"设计负责人"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"bonusInTotal",title:"总计算产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"bonusDistributed",title:"已发放产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"bonusReserved",title:"剩余产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"hj_bonusSeasonProgress",title:"环境本季度进度",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"hj_bonusSeasonAmount",title:"环境本季度产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"jg_bonusSeasonProgress",title:"结构本季度进度",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"jg_bonusSeasonAmount",title:"结构本季度产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"dy_bonusSeasonProgress",title:"电仪本季度进度",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"dy_bonusSeasonAmount",title:"电仪本季度产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"100",title:"阶段状态",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("tag",{attrs:{type:"button",text:e.row.button},nativeOn:{click:function(a){return t.handleClickStatus(e.row)}}})]}}])}),t._v(" "),a("vxe-table-column",{attrs:{width:"100",title:"操作记录",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.history(e.row.itemNumber)}}},[a("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:"project-history"}})],1)]}}])})],1)],1)},n=[],i=(a("c5f6"),a("db72")),o=a("75fc"),r=(a("96cf"),a("3b8d")),u=(a("ac6a"),a("ed08")),l=a("add5"),c=a.n(l),m=a("c28c"),b=a("c695"),d=a.n(b),p={name:"ProgressManage",data:function(){return{project_Category:"",propject_CategoryList:[],design_Stage:"",design_StageList:[],stage_Status:"",stage_StatusList:[],project_NameOrNumber:"",tableData:[],tempTableData:[],sum6:0,sum7:0,sum8:0,sum10:0,sum12:0,sum14:0,sum15:0,clientHeight:0,loading:!1}},computed:{},components:{Tag:m["a"]},methods:{history:function(t){this.$router.push({path:"/bonus-designprincipal/ProjectHistory/".concat(t)})},footerMethod:function(t){var e=t.columns,a=t.data,s=[];return e.forEach((function(t,e){if(0===e)s.push("总计");else{var n=null;switch(t.property){case"bonusInTotal":n=d.a.sum(a,t.property).toFixed(2);break;case"bonusDistributed":n=d.a.sum(a,t.property).toFixed(2);break;case"bonusReserved":n=d.a.sum(a,t.property).toFixed(2);break;case"hj_bonusSeasonAmount":n=d.a.sum(a,t.property).toFixed(2);break;case"jg_bonusSeasonAmount":n=d.a.sum(a,t.property).toFixed(2);break;case"dy_bonusSeasonAmount":n=d.a.sum(a,t.property).toFixed(2);break;case"bonusSeasonAmount":n=d.a.sum(a,t.property).toFixed(2);break}s.push(n)}})),[s]},handleClickStatus:function(t){this.$router.push({path:"/bonus-designprincipal/ProgressSubmit/".concat(t.itemNumber)})},getTableList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var s={project_Category:e.project_Category,design_Stage:e.design_Stage,projectId:e.project_NameOrNumber,stage_Status:e.stage_Status};e.$store.dispatch("productionDesignprincipal/getTableList",s).then((function(a){for(var s in e.tableData=a,e.tableData)e.tableData[s].projectCategory=Object(u["a"])(e.tableData[s].projectCategory,e.propject_CategoryList),e.tableData[s].designStage=Object(u["a"])(e.tableData[s].designStage,e.design_StageList),e.tableData[s].button=Object(u["a"])(e.tableData[s].button,e.stage_StatusList),e.tableData[s].phaseExtraName&&(e.tableData[s].designStage="".concat(e.tableData[s].designStage,"-").concat(e.tableData[s].phaseExtraName));e.loading=!1,t()})).catch((function(t){e.$message({message:t,type:"error"}),e.loading=!1}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),readSettings:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e.$store.dispatch("settings/getSettings").then((function(a){e.propject_CategoryList=[{value:"",label:"项目类别(全部)"}].concat(Object(o["a"])(a.projectCategory)),e.design_StageList=[{value:"",label:"设计阶段(全部)"}].concat(Object(o["a"])(a.designPhase)),e.stage_StatusList=[{value:"",label:"阶段状态(全部)"}].concat(Object(o["a"])(a.stageStatusDesignprinciple)),t()})).catch((function(t){e.$message({message:t,type:"error"})}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),Output:function(){var t=this;for(var e in this.tempTableData.length=0,this.sum6=0,this.sum7=0,this.sum8=0,this.sum10=0,this.sum12=0,this.sum14=0,this.sum15=0,this.tableData)this.tempTableData[e]=Object(i["a"])({},{index:Number(e)+1},{},this.tableData[e]),this.sum6+=Number(this.tempTableData[e].bonusInTotal),this.sum7+=Number(this.tempTableData[e].bonusDistributed),this.sum8+=Number(this.tempTableData[e].bonusReserved),this.sum10+=Number(this.tempTableData[e].hj_bonusSeasonAmount),this.sum12+=Number(this.tempTableData[e].jg_bonusSeasonAmount),this.sum14+=Number(this.tempTableData[e].dy_bonusSeasonAmount),this.sum15+=Number(this.tempTableData[e].bonusSeasonAmount);this.tempTableData=[].concat(Object(o["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",bonusInTotal:Number(this.sum6).toFixed(2),bonusDistributed:Number(this.sum7).toFixed(2),bonusReserved:Number(this.sum8).toFixed(2),hj_bonusSeasonProgress:"",hj_bonusSeasonAmount:Number(this.sum10).toFixed(2),jg_bonusSeasonProgress:"",jg_bonusSeasonAmount:Number(this.sum12).toFixed(2),dy_bonusSeasonProgress:"",dy_bonusSeasonAmount:Number(this.sum14).toFixed(2),bonusSeasonAmount:Number(this.sum15).toFixed(2),button:""}]),this.downloadLoading=!0,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-2181d362")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["序号","项目编号","项目名称","项目类别","设计阶段","设计负责人","项目总产值","已发放产值","剩余产值","环境本季度进度","环境本季度产值","结构本季度进度","结构本季度产值","电仪本季度进度","电仪本季度产值","本季度产值合计","阶段状态"],s=["index","itemNumber","projectName","projectCategory","designStage","designPrincipal","bonusInTotal","bonusDistributed","bonusReserved","hj_bonusSeasonProgress","hj_bonusSeasonAmount","jg_bonusSeasonProgress","jg_bonusSeasonAmount","dy_bonusSeasonProgress","dy_bonusSeasonAmount","bonusSeasonAmount","button"],n=t.tempTableData,i=t.formatJson(s,n);e.export_json_to_excel({header:a,data:i,filename:"本季度项目列表",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))},print:function(){for(var t in this.tempTableData.length=0,this.sum6=0,this.sum7=0,this.sum8=0,this.sum10=0,this.sum12=0,this.sum14=0,this.sum15=0,this.tableData)this.tempTableData[t]=Object(i["a"])({},{index:Number(t)+1},{},this.tableData[t]),this.sum6+=Number(this.tempTableData[t].bonusInTotal),this.sum7+=Number(this.tempTableData[t].bonusDistributed),this.sum8+=Number(this.tempTableData[t].bonusReserved),this.sum10+=Number(this.tempTableData[t].hj_bonusSeasonAmount),this.sum12+=Number(this.tempTableData[t].jg_bonusSeasonAmount),this.sum14+=Number(this.tempTableData[t].dy_bonusSeasonAmount),this.sum15+=Number(this.tempTableData[t].bonusSeasonAmount);this.tempTableData=[].concat(Object(o["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",bonusInTotal:Number(this.sum6).toFixed(2),bonusDistributed:Number(this.sum7).toFixed(2),bonusReserved:Number(this.sum8).toFixed(2),hj_bonusSeasonProgress:"",hj_bonusSeasonAmount:Number(this.sum10).toFixed(2),jg_bonusSeasonProgress:"",jg_bonusSeasonAmount:Number(this.sum12).toFixed(2),dy_bonusSeasonProgress:"",dy_bonusSeasonAmount:Number(this.sum14).toFixed(2),bonusSeasonAmount:Number(this.sum15).toFixed(2),button:""}]);var e={printable:this.tempTableData,properties:[{field:"index",displayName:"序号"},{field:"itemNumber",displayName:"项目编号"},{field:"projectName",displayName:"项目名称"},{field:"projectCategory",displayName:"项目类别"},{field:"designStage",displayName:"设计阶段"},{field:"designPrincipal",displayName:"设计负责人"},{field:"bonusInTotal",displayName:"项目总产值"},{field:"bonusDistributed",displayName:"已发放产值"},{field:"bonusReserved",displayName:"剩余产值"},{field:"hj_bonusSeasonProgress",displayName:"环境本季度进度"},{field:"hj_bonusSeasonAmount",displayName:"环境本季度产值"},{field:"jg_bonusSeasonProgress",displayName:"结构本季度进度"},{field:"jg_bonusSeasonAmount",displayName:"结构本季度产值"},{field:"dy_bonusSeasonProgress",displayName:"电仪本季度进度"},{field:"dy_bonusSeasonAmount",displayName:"电仪本季度产值"},{field:"bonusSeasonAmount",displayName:"本季度产值合计"},{field:"button",displayName:"阶段状态"}],type:"json",gridHeaderStyle:"color: black;  border: 1px solid #000000;",gridStyle:"border: 1px solid #000000;",font_size:"50px"};c()(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},init:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.readSettings();case 2:return t.next=4,this.getTableList();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.init()},activated:function(){this.init()},created:function(){this.loading=!0,this.clientHeight=document.body.clientHeight-210,console.log(document.body.clientHeight)}},h=p,g=h,f=a("2877"),_=Object(f["a"])(g,s,n,!1,null,"1f534aca",null);e["default"]=_.exports},c28c:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tag"},["tag"===t.type?a("el-tag",{attrs:{type:t.selectColor}},[t._v(t._s(t.text))]):t._e(),t._v(" "),"button"===t.type?a("el-button",{attrs:{type:t.selectColor,plain:"",size:"small",disabled:t.open}},[t._v(t._s(t.text))]):t._e()],1)},n=[],i={name:"tag",props:{type:{type:String,default:function(){return"请输入类型"}},text:{type:String,default:function(){return"请输入文字"}},open:{type:Boolean,default:function(){return!1}}},computed:{selectColor:function(){switch(this.text){case"未录入":return"danger";case"已录入":return"warning";case"已提交":return"success";case"已修改":return"primary";case"已发放":return"info";default:return"info"}}},data:function(){return{}},mounted:function(){}},o=i,r=a("2877"),u=Object(r["a"])(o,s,n,!1,null,null,null);e["a"]=u.exports},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n}));a("28a5"),a("a481"),a("6b54"),a("7618");function s(t,e){for(var a in e)if(e[a].value==t)return e[a].label}function n(t,e){for(var a in e)if(e[a].label==t)return e[a].value}}}]);