(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-054576a0"],{"39be":function(t,e,a){},4075:function(t,e,a){"use strict";var i=a("39be"),s=a.n(i);s.a},"4f4d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projectlist-container"},[a("el-select",{attrs:{placeholder:"项目类别"},model:{value:t.project_Category,callback:function(e){t.project_Category=e},expression:"project_Category"}},t._l(t.propject_CategoryList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{attrs:{placeholder:"设计阶段"},model:{value:t.design_Stage,callback:function(e){t.design_Stage=e},expression:"design_Stage"}},t._l(t.design_StageList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{attrs:{placeholder:"所"},model:{value:t.select_specialty,callback:function(e){t.select_specialty=e},expression:"select_specialty"}},t._l(t.list_specialty,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"项目名称或编号"},model:{value:t.project_NameOrNumber,callback:function(e){t.project_NameOrNumber=e},expression:"project_NameOrNumber"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getProjectList}},[t._v("\n      查询\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.Output}},[a("svg-icon",{staticStyle:{width:"14px",height:"14.5px"},attrs:{iconClass:"excel"}}),t._v("\n      导出\n    ")],1),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-printer"},on:{click:t.print}},[t._v("\n      打印\n    ")]),t._v(" "),a("vxe-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"20px"},attrs:{border:"","show-overflow":"","show-footer":"","highlight-hover-row":"",align:"center","max-height":t.clientHeight,data:t.tableData,"footer-method":t.footerMethod}},[a("vxe-table-column",{attrs:{type:"seq",width:"60",title:"序号",fixed:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{field:"itemNumber",title:"项目编号",width:"130",fixed:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"280",field:"projectName",title:"项目名称",fixed:"left",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"projectCategory",title:"项目类别",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"designStage",title:"设计阶段",align:"left"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"designPrincipal",title:"设计负责人"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"specialty",title:"所"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"specialtyBonus",title:"所计算产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"bonusDistributed",title:"已发放产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"bonusReserved",title:"剩余产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"bonusSeasonProgress",title:"本季度进度",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{"min-width":"100",field:"bonusSeasonAmount",title:"本季度产值",align:"right"}}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"project_submit",title:"项目进度",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleProjectProgress(e.row)}}},[a("svg-icon",{staticStyle:{width:"20px",height:"20px"},attrs:{iconClass:e.row.project_submit?"projectprogress":"projectprogress-warn"}})],1)]}}])}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",field:"bonus_submit",title:"产值分配",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleBonusDistribution(e.row)}}},[a("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:e.row.bonus_submit?"bonusdistribution":"bonusdistribution-warn"}})],1)]}}])}),t._v(" "),a("vxe-table-column",{attrs:{width:"80",title:"操作记录",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.history(e.row.itemNumber)}}},[a("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:"project-history"}})],1)]}}])})],1)],1)},s=[],n=(a("c5f6"),a("db72")),r=a("75fc"),o=(a("96cf"),a("3b8d")),l=(a("ac6a"),a("c695")),c=a.n(l),u=a("ed08"),p=a("add5"),d=a.n(p),m={name:"ProjectList",data:function(){return{project_Category:"",propject_CategoryList:[],design_Stage:"",design_StageList:[],select_specialty:"",list_specialty:[],project_NameOrNumber:"",tableData:[],tempTableData:[],sum7:0,sum8:0,sum9:0,sum11:0,clientHeight:0,loading:!1}},computed:{},methods:{history:function(t){this.$router.push({path:"/bonus-dean-project/ProjectHistory/".concat(t)})},renderButton:function(t){return t?"projectprogress":"projectprogress-warn"},footerMethod:function(t){var e=t.columns,a=t.data,i=[];return e.forEach((function(t,e){if(0===e)i.push("总计");else{var s=null;switch(t.property){case"specialtyBonus":s=c.a.commafy(c.a.sum(a,t.property).toFixed(2));break;case"bonusDistributed":s=c.a.commafy(c.a.sum(a,t.property).toFixed(2));break;case"bonusReserved":s=c.a.commafy(c.a.sum(a,t.property).toFixed(2));break;case"bonusSeasonAmount":s=c.a.commafy(c.a.sum(a,t.property).toFixed(2));break}i.push(s)}})),[i]},getProjectList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.abrupt("return",new Promise((function(t,a){e.$store.dispatch("bonusdean/getprojectlist",{projectType:e.project_Category,projectPhase:e.design_Stage,projectSelect:e.project_NameOrNumber,specialty:e.select_specialty}).then((function(a){for(var i in e.tableData=a,e.tableData)e.tableData[i].projectCategory=Object(u["a"])(e.tableData[i].projectCategory,e.propject_CategoryList),e.tableData[i].designStage=Object(u["a"])(e.tableData[i].designStage,e.design_StageList),e.tableData[i].specialty=Object(u["a"])(e.tableData[i].specialty,e.list_specialty),e.tableData[i].phaseExtraName&&(e.tableData[i].designStage="".concat(e.tableData[i].designStage,"-").concat(e.tableData[i].phaseExtraName));e.loading=!1,t()})).catch((function(t){e.$message({message:t,type:"error"}),e.loading=!1}))})));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleProjectProgress:function(t){this.$router.push({path:"/bonus-dean-project/ProjectProgress/".concat(t.itemNumber,"/").concat(Object(u["b"])(t.specialty,this.list_specialty))})},handleBonusDistribution:function(t){this.$router.push({path:"/bonus-dean-project/BonusSubspecialtyList/".concat(t.itemNumber,"/").concat(Object(u["b"])(t.specialty,this.list_specialty))})},readSettings:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e.$store.dispatch("settings/getSettings").then((function(a){e.propject_CategoryList=[{value:"",label:"项目类别(全部)"}].concat(Object(r["a"])(a.projectCategory)),e.design_StageList=[{value:"",label:"设计阶段(全部)"}].concat(Object(r["a"])(a.designPhase)),e.list_specialty=[{value:"",label:"所(全部)"}].concat(Object(r["a"])(a.placeList)),t()})).catch((function(t){e.$message({message:t,type:"error"})}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),Output:function(){var t=this;for(var e in this.tempTableData.length=0,this.sum7=0,this.sum8=0,this.sum9=0,this.sum11=0,this.tableData)this.tempTableData[e]=Object(n["a"])({},{index:Number(e)+1},{},this.tableData[e]),this.sum7+=Number(this.tempTableData[e].specialtyBonus),this.sum8+=Number(this.tempTableData[e].bonusDistributed),this.sum9+=Number(this.tempTableData[e].bonusReserved),this.sum11+=Number(this.tempTableData[e].bonusSeasonAmount),console.log(this.sum7,this.sum8,this.sum9,this.sum11);this.tempTableData=[].concat(Object(r["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",specialty:"",specialtyBonus:Number(this.sum7).toFixed(2),bonusDistributed:Number(this.sum8).toFixed(2),bonusReserved:Number(this.sum9).toFixed(2),bonusSeasonProgress:"",bonusSeasonAmount:Number(this.sum11).toFixed(2)}]),this.downloadLoading=!0,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-2181d362")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["序号","项目编号","项目名称","项目类别","设计阶段","设计负责人","所","所产值","已发放产值","剩余产值","本季度进度","本季度产值"],i=["index","itemNumber","projectName","projectCategory","designStage","designPrincipal","specialty","specialtyBonus","bonusDistributed","bonusReserved","bonusSeasonProgress","bonusSeasonAmount"],s=t.tempTableData,n=t.formatJson(i,s);e.export_json_to_excel({header:a,data:n,filename:"本季度项目列表",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))},print:function(){for(var t in this.tempTableData.length=0,this.sum7=0,this.sum8=0,this.sum9=0,this.sum11=0,this.tableData)this.tempTableData[t]=Object(n["a"])({},{index:Number(t)+1},{},this.tableData[t]),this.sum7+=Number(this.tempTableData[t].specialtyBonus),this.sum8+=Number(this.tempTableData[t].bonusDistributed),this.sum9+=Number(this.tempTableData[t].bonusReserved),this.sum11+=Number(this.tempTableData[t].bonusSeasonAmount),console.log(this.sum7,this.sum8,this.sum9,this.sum11);this.tempTableData=[].concat(Object(r["a"])(this.tempTableData),[{index:"合计",itemNumber:"",projectName:"",projectCategory:"",designStage:"",designPrincipal:"",specialty:"",specialtyBonus:Number(this.sum7).toFixed(2),bonusDistributed:Number(this.sum8).toFixed(2),bonusReserved:Number(this.sum9).toFixed(2),bonusSeasonProgress:"",bonusSeasonAmount:Number(this.sum11).toFixed(2)}]);var e={printable:this.tempTableData,properties:[{field:"index",displayName:"序号"},{field:"itemNumber",displayName:"项目编号"},{field:"projectName",displayName:"项目名称"},{field:"projectCategory",displayName:"项目类别"},{field:"designStage",displayName:"设计阶段"},{field:"designPrincipal",displayName:"设计负责人"},{field:"specialty",displayName:"所"},{field:"specialtyBonus",displayName:"所产值"},{field:"bonusDistributed",displayName:"已发放产值"},{field:"bonusReserved",displayName:"剩余产值"},{field:"bonusSeasonProgress",displayName:"本季度进度"},{field:"bonusSeasonAmount",displayName:"本季度产值"}],type:"json",gridHeaderStyle:"color: black;  border: 1px solid #000000;",gridStyle:"border: 1px solid #000000;"};d()(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},initProjectList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e.$store.dispatch("bonusdean/getprojectlist",{projectType:"",projectPhase:"",projectSelect:"",specialty:e.$route.params.specialty}).then((function(a){for(var i in e.tableData=a,e.tableData)e.tableData[i].projectCategory=Object(u["a"])(e.tableData[i].projectCategory,e.propject_CategoryList),e.tableData[i].designStage=Object(u["a"])(e.tableData[i].designStage,e.design_StageList),e.tableData[i].specialty=Object(u["a"])(e.tableData[i].specialty,e.list_specialty),e.tableData[i].phaseExtraName&&(e.tableData[i].designStage="".concat(e.tableData[i].designStage,"-").concat(e.tableData[i].phaseExtraName));e.select_specialty=":specialty"!=e.$route.params.specialty?e.$route.params.specialty:"",e.loading=!1,t()})).catch((function(t){e.$message({message:t,type:"error"}),e.loading=!1}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.readSettings();case 2:return t.next=4,this.initProjectList();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.init()},activated:function(){this.loading=!0,this.clientHeight=document.body.clientHeight-210,this.init()},created:function(){this.loading=!0,this.clientHeight=document.body.clientHeight-210,console.log(document.body.clientHeight)}},b=m,h=b,g=(a("4075"),a("2877")),f=Object(g["a"])(h,i,s,!1,null,"da58bac6",null);e["default"]=f.exports},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));a("28a5"),a("a481"),a("6b54"),a("7618");function i(t,e){for(var a in e)if(e[a].value==t)return e[a].label}function s(t,e){for(var a in e)if(e[a].label==t)return e[a].value}}}]);