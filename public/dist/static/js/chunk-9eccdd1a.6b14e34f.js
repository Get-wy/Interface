(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9eccdd1a"],{"0a49":function(t,e,a){var n=a("9b43"),r=a("626a"),o=a("4bf8"),i=a("9def"),l=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,s=3==t,u=4==t,p=6==t,d=5==t||p,h=e||l;return function(e,l,f){for(var b,g,m=o(e),v=r(m),y=n(l,f,3),j=i(v.length),w=0,_=a?h(e,j):c?h(e,0):void 0;j>w;w++)if((d||w in v)&&(b=v[w],g=y(b,w,m),t))if(a)_[w]=g;else if(g)switch(t){case 3:return!0;case 5:return b;case 6:return w;case 2:_.push(b)}else if(u)return!1;return p?-1:s||u?u:_}}},7514:function(t,e,a){"use strict";var n=a("5ca1"),r=a("0a49")(5),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),n(n.P+n.F*i,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},8839:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-list"},[a("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请选择项目类别"},model:{value:t.projectCategory,callback:function(e){t.projectCategory=e},expression:"projectCategory"}},t._l(t.project_category,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请选择设计阶段"},model:{value:t.designPhase,callback:function(e){t.designPhase=e},expression:"designPhase"}},t._l(t.design_phase,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{placeholder:"请输入项目名称或编号"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getList}},[t._v("\n    查询\n  ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.goProjectAdd}},[t._v("\n    添加\n  ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-printer"},on:{click:t.Output}},[t._v("\n    导出\n  ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-tickets"},on:{click:t.print}},[t._v("\n    打印\n  ")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"default-sort":{prop:"date",order:"descending"},border:""}},[a("el-table-column",{attrs:{fixed:"",label:"序号",width:"80",sortable:"",align:"center",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"projectId",label:"项目编号",width:"130",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"projectName",label:"项目名称",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectType",label:"项目类别",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectPhase",label:"设计阶段",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"designDirector",label:"设计负责人",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectInvestment",label:"总投资(万元)",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phaseBonus",label:"阶段产值奖金",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"environmentBonus",label:"环境产值",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"constructionBonus",label:"结构产值",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"electricInstrumentBonus",label:"电仪产值",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"distributedBonus",label:"已发放产值",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surplusBonus",label:"剩余产值",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{filters:[{text:"进行中",value:"进行中"},{text:"已完成",value:"已完成"}],"filter-method":t.filterTag,prop:"projectStatus",label:"项目状态",width:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",prop:"",label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.hasSubspecialty,expression:"scope.row.hasSubspecialty"}],attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("i",{staticClass:"el-icon-edit"})]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.row.hasSubspecialty,expression:"!scope.row.hasSubspecialty"}],attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("i",{staticClass:"el-icon-search"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作记录",align:"center",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.history(e.row.projectId)}}},[a("svg-icon",{staticStyle:{width:"18px",height:"18px"},attrs:{iconClass:"project-history"}})],1)]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)},r=[],o=a("75fc"),i=(a("96cf"),a("3b8d")),l=(a("c5f6"),a("db72")),c=(a("7514"),a("2f62"),a("da6f")),s=a("add5"),u=a.n(s),p=a("ed08"),d={name:"project-list",data:function(){return{project_category:[],design_phase:[],projectCategory:"",designPhase:"",input:"",tableData:[],currentPage:0,pageSize:1,total:0}},computed:{},watch:{$route:{handler:function(t){console.log(t)},immediate:!0}},methods:{filterTag:function(t,e){return e.projectStatus===t},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getList(t)},getList:function(t){var e=this,a={projectType:this.projectCategory,projectPhase:this.designPhase,projectSelect:this.input,page:t||""};this.$store.dispatch("adminProduction/showProject",a).then((function(t){for(var a in console.log("查到内容",t),e.currentPage=t.currentPage,e.pageSize=t.pageSize,e.total=t.total,e.tableData=t.data,e.tableData)e.tableData[a].projectType=Object(p["a"])(e.tableData[a].projectType,e.project_category),e.tableData[a].projectPhase=Object(p["a"])(e.tableData[a].projectPhase,e.design_phase),e.tableData[a].designPhaseName&&(e.tableData[a].projectPhase="".concat(e.tableData[a].projectPhase,"-").concat(e.tableData[a].designPhaseName))})).catch((function(){console.log("查询失败")}))},goProjectAdd:function(){this.$router.push({path:"/project-manage/add"})},renderProjectType:function(t){var e=c["a"].get("setting").projectCategory.find((function(e){return e.value==t.projectType}));return e.label},renderProjectPhase:function(t){var e=c["a"].get("setting").designPhase.find((function(e){return e.value==t.projectPhase}));return e.label},handleEdit:function(t){console.log(t,this.currentPage),t.hasSubspecialty?this.$router.push({path:"/project-manage/edit/".concat(t.projectId,"/true/").concat(this.currentPage)}):this.$router.push({path:"/project-manage/edit/".concat(t.projectId,"/false/").concat(t.currentPage)})},Output:function(){var t=this;for(var e in this.tableData)this.tableData[e]=Object(l["a"])({},{index:Number(e)+1},{},this.tableData[e]);this.downloadLoading=!0,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then((function(e){var a=["序号","项目编号","项目名称","项目类别","设计阶段","设计负责人","总投资(万元)","阶段产值奖金","环境产值","结构产值","电仪产值","已发放产值","剩余产值","项目状态"],n=["index","projectId","projectName","projectType","projectPhase","designDirector","projectInvestment","phaseBonus","environmentBonus","constructionBonus","electricInstrumentBonus","distributedBonus","surplusBonus","projectStatus"],r=t.tableData,o=t.formatJson(n,r);e.export_json_to_excel({header:a,data:o,filename:"负责所长项目列表",autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))},print:function(){for(var t in console.log("打印",this.tableData),this.tableData)this.tableData[t]=Object(l["a"])({},{index:Number(t)+1},{},this.tableData[t]);var e={printable:this.tableData,properties:[{field:"index",displayName:"序号"},{field:"projectId",displayName:"项目编号"},{field:"projectName",displayName:"项目名称"},{field:"projectType",displayName:"项目类别"},{field:"projectPhase",displayName:"设计阶段"},{field:"designDirector",displayName:"设计负责人"},{field:"projectInvestment",displayName:"总投资(万元)"},{field:"phaseBonus",displayName:"阶段产值奖金"},{field:"environmentBonus",displayName:"环境产值"},{field:"constructionBonus",displayName:"结构产值"},{field:"electricInstrumentBonus",displayName:"电仪产值"},{field:"distributedBonus",displayName:"已发放产值"},{field:"surplusBonus",displayName:"剩余产值"},{field:"projectStatus",displayName:"项目状态"}],type:"json",gridHeaderStyle:"color: black;  border: 1px solid #000000;",gridStyle:"border: 1px solid #000000;"};console.log(e),u()(e)},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},history:function(t){this.$router.push({path:"/project-manage/ProjectHistory/".concat(t,"/").concat(this.currentPage)})},init:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("初始化"),t.next=3,this.$store.dispatch("settings/getSettings").then((function(t){e.project_category=[{label:"项目类型(全部)",value:""}].concat(Object(o["a"])(t.projectCategory)),e.design_phase=[{label:"阶段类型(全部)",value:""}].concat(Object(o["a"])(t.designPhase))})).catch((function(){console.log("查询项目配置json文件出错")}));case 3:this.getList(this.$route.params.page);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){},created:function(){this.init()}},h=d,f=h,b=a("2877"),g=Object(b["a"])(f,n,r,!1,null,"3029ab6f",null);e["default"]=g.exports},cd1c:function(t,e,a){var n=a("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,a){var n=a("d3f4"),r=a("1169"),o=a("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));a("28a5"),a("a481"),a("6b54"),a("7618");function n(t,e){for(var a in e)if(e[a].value==t)return e[a].label}function r(t,e){for(var a in e)if(e[a].label==t)return e[a].value}}}]);